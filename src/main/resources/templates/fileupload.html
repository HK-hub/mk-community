<!DOCTYPE html>
<html lang="en">

<head>
	<title>书籍收录</title>
	<script src="/js/jquery-3.5.1/jquery-3.5.1.min.js"></script>
</head>

<body>
<form id="fileupload-form" action="/qiniu/upload" method="POST" enctype="multipart/form-data">
	<h2>上传书籍文件:</h2>
	<input type="file" name="files" multiple="multiple">
	<h2>上传封面</h2>
	<input type="file" name="files" multiple="multiple">
	<h2>输入书籍名称:</h2>
	<input type="text" name="bookName" >
	<h2>输入书籍作者</h2>
	<input type="text" name="author" >
	<h2>选择书籍标签:</h2>
	<select name="target">
		<option value ="java">java</option>
		<option value ="c++">c++</option>
		<option value="c">c</option>
		<option value="python">python</option>
		<option value="spring">spring</option>
		<option value="mybatis">mybatis</option>
		<option value="mysql">mysql</option>
	</select>
	<h2>书籍描述:</h2>
	<textarea name="description" id="" cols="30" rows="10">

        </textarea>
	<input type="submit" onclick="uploadFile();">
</form>

<script>
    /*function submit() {
		var formData=new FormData($("#form")[0]);
		formData.append("type",type);//也可以添加其他字段
		$.ajax({
			type:"post",
			url:"qiniu/upload",
			data:formData,
			contentType: false,
			processData: false,
			dataType:"json",
			success:function(res){
			},
			error:function (msg) {
			}
		})
	}*/

    var uploadFile = function () {
        //获取基本表单数据
        var formdata = new FormData(document.getElementById("fileupload-form"));
        //
        //var file = $("#file")[0].files[0];
        //var formData = new FormData();
        //formData.append("file",file);
        console.log(formdata);
        $.ajax({
            url:"qiniu/upload",
            type: "POST",
            data: formdata,
            processData:false,
            contentType:false,
            success:function(){
                console.log("over...");
            },
            error: function (e) {
                alert("错误")
            }
        })

    }

</script>

</body>

</html>